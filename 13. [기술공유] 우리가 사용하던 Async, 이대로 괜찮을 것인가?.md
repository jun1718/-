![image](https://user-images.githubusercontent.com/88138317/191445139-eaa6e510-9343-45e3-a7ae-0eaf58da0adb.png)
# 목차

#### 1) 배경

#### 2) Async 스레드 설정

#### 3) Async 설정 적용

#### 4) 마치며

# 1) 배경

* Async를 우리 팀에서는 설정 없이 사용해왔습니다. 이렇게 되면 스레드 관리가 안되서 여러 문제가 발생할 수 있고 동묘님께서도 리뷰때 지적해주신 사항입니다. 그래서 이부분 설정이 필요할 것 같아 공부한뒤 공유합니다.

# 2) Async 스레드 설정

* Async는 바보야
우리가 보통 Async를 설정하지 않고 사용합니다.
하지만 그럴경우에 큰 문제가 발생합니다. 왜냐하면 기본 Async만 사용하면 SympleAsyncTaskExecutor를 사용하게 되는데 이 컴포넌트는 스레드를 만들어내는 바보이기만 합니다. 즉 스레드를 관리할 수 가 없어요.
그래서 직접적으로 설정을 만들어서 사용해주어야합니다.
* 적용
아래 사진같이 Async로 스레드를 관리하기 위한 설정을 정의할 수 있습니다.
    * setCorePoolSize()는 기본적인 스레드 개수를 뜻합니다.
    * setQueueCapacity()는 기본스레드가 모두 찼을때 큐에다가 대기시켜놓을 요청의 수를 의미합니다.
    * setMaxPoolSize()는 최대 스레드 수입니다.
    * setThreadNamePrefix()를 통해서 스레드네임의 접두어를 정함으로 이 스레드가 어디서 난 것인지 출처를 파악하기 용이하도록 할때 사용합니다.
        * 주의 : 저 또한 실질적으로 기본 스레드개수와 최대개수가 어느정도 나와야할지 감이 잡히지 않는 상태라 조금더 찾아볼 계획입니다. 혹시나 좋은 답을 알고 계시는 분께서는 제게 알려주시면 감사하겠습니다.
        ![image.png](/files/3361229875653704054)

# 3) Async 설정 적용

* 아래와 같이 위에서 만들어준 Async 설정 Bean의 name을 삽입해주면 됩니다. 아주 간단!합니다.
* 이제부터 불안정한 Async가 아닌 확실하고 이유있는 Async를 만나보세요!
![image.png](/files/3361228606707233470)

# 4) 마치며

* 주의에서 적어놓았듯이 어떤 경우에 어떤 스레드수를 어느 큐만큼 대기시켜서 사용해야하는 지 등은 아직 미지수입니다. 그래도 아예 몰랐던 그시절보다는 훨씬 자신감있게 Async를 사용할 수 있게 되었습니다.
여러분께서도 준비된 정보를 잘 습득하시어 자신감 있게 Async를 사용할 것을 추천드립니다!
